<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Planificador de Rutas{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}?v=100">
    {% block extra_head %}{% endblock %}
</head>
<body>
    <header>
        <h1>Planificador de Rutas de DistribuciÃ³n</h1>
        <nav class="main-nav">
          <a href="{% url 'mapa' %}"
            class="{% if request.resolver_match.url_name == 'mapa' %}active{% endif %}">
            ğŸ—ºï¸ Rutas
          </a>
          
          <a href="{% url 'crm:clientes_list' %}"
            class="{% if request.resolver_match.url_name == 'clientes_list' %}active{% endif %}">
            ğŸ‘¥ Clientes
          </a>
          
          <a href="{% url 'crm:crear_cliente' %}"
            class="{% if request.resolver_match.url_name == 'crear_cliente' %}active{% endif %}">
            â• Crear cliente
          </a>

          <a href="{% url 'crm:ventas_list' %}"
            class="{% if request.resolver_match.url_name == 'ventas_list' %}active{% endif %}">
            ğŸ’° Ventas
          </a>

          <a href="{% url 'crm:buscar_cliente_telefono' %}"
             class="{% if request.resolver_match.url_name == 'buscar_cliente_telefono' %}active{% endif %}">
             ğŸ” Buscar telÃ©fono
          </a>
          
          <!-- âœ¨ NUEVO: MenÃº de Balance con Dropdown -->
          <div class="dropdown">
            <a href="#" class="dropdown-toggle 
              {% if 'balance' in request.resolver_match.url_name %}active{% endif %}">
              ğŸ“Š Balance â–¼
            </a>
            <div class="dropdown-menu">
              <a href="{% url 'crm:balance_mensual' %}"
                 class="{% if request.resolver_match.url_name == 'balance_mensual' %}active{% endif %}">
                ğŸ“… Balance Mensual
              </a>
              <a href="{% url 'crm:balance_anual' %}"
                 class="{% if request.resolver_match.url_name == 'balance_anual' %}active{% endif %}">
                ğŸ“Š Balance Anual
              </a>
              <a href="{% url 'crm:balance_comparativo' %}"
                 class="{% if request.resolver_match.url_name == 'balance_comparativo' %}active{% endif %}">
                ğŸ“ˆ Comparar AÃ±os
              </a>
            </div>
          </div>
          
          <a href="{% url 'crm:resumen_mensual' %}"
            class="{% if request.resolver_match.url_name == 'resumen_mensual' %}active{% endif %}">
            ğŸ“‹ Resumen mensual
          </a>
          
          <a href="{% url 'crm:dashboard' %}">ğŸ  Dashboard</a>
          
          <a class="btn btn-secondary" href="{% url 'crm:inventario' %}">ğŸ“¦ Inventario</a>
          
          <a href="{% url 'crm:consumo_bolsas' %}" class="btn-inventario">
            ğŸ“¦ Inventario bolsas
          </a>
        </nav>
    </header>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer>
        <p>&copy; 2025 LogÃ­stica Jimacomex SpA </p>
    </footer>

    <!-- âœ… Modal confirmaciÃ³n -->
    <div id="confirmModal" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal-box" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
        <h3 id="confirmTitle">Confirmar</h3>
        <p id="confirmText">Â¿Seguro?</p>
        <div class="modal-actions">
          <button id="btnCancel" class="btn-cancel" type="button">Cancelar</button>
          <button id="btnConfirm" class="btn-danger" type="button">Aceptar</button>
        </div>
      </div>
    </div>

    <!-- âœ… CARGAR main.js ANTES de los scripts especÃ­ficos de cada pÃ¡gina -->
    <script src="{% static 'js/main.js' %}?v=99"></script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>